{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}},{"name":"@react-navigation/core","data":{"isAsync":false}},{"name":"./reducer","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createReactNavigationReduxMiddleware = createReactNavigationReduxMiddleware;\n  exports.createDidUpdateCallback = createDidUpdateCallback;\n  exports.initializeListeners = initializeListeners;\n  exports.createNavigationPropConstructor = createNavigationPropConstructor;\n\n  var _invariant = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"invariant\"));\n\n  var _core = _$$_REQUIRE(_dependencyMap[2], \"@react-navigation/core\");\n\n  var _reducer = _$$_REQUIRE(_dependencyMap[3], \"./reducer\");\n\n  var reduxSubscribers = new Map();\n\n  function getReduxSubscribers(key) {\n    var subscribers = reduxSubscribers.get(key);\n\n    if (!subscribers) {\n      subscribers = new Set();\n      reduxSubscribers.set(key, subscribers);\n    }\n\n    return subscribers;\n  }\n\n  var EMPTY_SCREEN_PROPS = {};\n\n  var getScreenProps = function getScreenProps() {\n    return EMPTY_SCREEN_PROPS;\n  };\n\n  function createReactNavigationReduxMiddleware(navStateSelector) {\n    var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"root\";\n    return function (store) {\n      return function (next) {\n        return function (action) {\n          var oldState = store.getState();\n          var result = next(action);\n          var newState = store.getState();\n          triggerAllSubscribers(key, {\n            type: 'action',\n            action: action,\n            state: navStateSelector(newState),\n            lastState: navStateSelector(oldState)\n          });\n          return result;\n        };\n      };\n    };\n  }\n\n  var delayedTriggers = new Map();\n\n  function triggerAllSubscribers(key, payload) {\n    var trigger = function trigger() {\n      return getReduxSubscribers(key).forEach(function (subscriber) {\n        return subscriber(payload);\n      });\n    };\n\n    if (!payload.action || !payload.action.hasOwnProperty('type') || !payload.action.type.startsWith(\"Navigation\") || payload.state === payload.lastState) {\n      trigger();\n      return;\n    }\n\n    var existingTriggers = delayedTriggers.get(key);\n\n    if (existingTriggers) {\n      existingTriggers.push(trigger);\n    } else {\n      delayedTriggers.set(key, [trigger]);\n    }\n  }\n\n  function triggerDelayedSubscribers(key) {\n    var triggers = delayedTriggers.get(key);\n\n    if (!triggers) {\n      return;\n    }\n\n    delayedTriggers.delete(key);\n\n    for (var _iterator = triggers, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var _trigger = _ref;\n\n      _trigger();\n    }\n  }\n\n  function createDidUpdateCallback(key) {\n    return triggerDelayedSubscribers.bind(null, key);\n  }\n\n  function initializeListeners(key, state) {\n    triggerAllSubscribers(key, {\n      type: 'action',\n      action: _reducer.initAction,\n      state: state,\n      lastState: null\n    });\n    triggerDelayedSubscribers(key);\n  }\n\n  function createNavigationPropConstructor(key) {\n    return function (dispatch, state, router, getCurrentNavigation) {\n      (0, _invariant.default)(router, \"App.router must be provided to createNavigationPropConstructor as of \" + \"react-navigation-redux-helpers@2.0.0. Learn more: \" + \"https://reactnavigation.org/docs/en/\" + \"redux-integration.html#breaking-changes-in-2.3\");\n      (0, _invariant.default)(getCurrentNavigation, \"getCurrentNavigation must be provided to createNavigationPropConstructor as of \" + \"react-navigation-redux-helpers@2.0.0. Learn more: \" + \"https://reactnavigation.org/docs/en/\" + \"redux-integration.html#breaking-changes-in-2.3\");\n      return (0, _core.getNavigation)(router, state, dispatch, getReduxSubscribers(key), getScreenProps, getCurrentNavigation);\n    };\n  }\n});","map":[[12,0,13,0],[14,0,14,0],[16,0,16,0],[18,0,18,0],[18,6,18,6,"reduxSubscribers"],[18,22,18,22],[18,25,18,25],[18,29,18,29,"Map"],[18,32,18,25],[18,34,18,0],[20,0,19,0],[20,11,19,9,"getReduxSubscribers"],[20,30,19,0],[20,31,19,29,"key"],[20,34,19,0],[20,36,19,72],[21,0,20,2],[21,8,20,6,"subscribers"],[21,19,20,17],[21,22,20,20,"reduxSubscribers"],[21,38,20,36],[21,39,20,37,"get"],[21,42,20,20],[21,43,20,41,"key"],[21,46,20,20],[21,47,20,2],[23,0,21,2],[23,8,21,6],[23,9,21,7,"subscribers"],[23,20,21,2],[23,22,21,20],[24,0,22,4,"subscribers"],[24,6,22,4,"subscribers"],[24,17,22,15],[24,20,22,18],[24,24,22,22,"Set"],[24,27,22,18],[24,29,22,4],[25,0,23,4,"reduxSubscribers"],[25,6,23,4,"reduxSubscribers"],[25,22,23,20],[25,23,23,21,"set"],[25,26,23,4],[25,27,23,25,"key"],[25,30,23,4],[25,32,23,30,"subscribers"],[25,43,23,4],[26,0,24,3],[28,0,25,2],[28,11,25,9,"subscribers"],[28,22,25,2],[29,0,26,1],[31,0,30,0],[31,6,30,6,"EMPTY_SCREEN_PROPS"],[31,24,30,24],[31,27,30,27],[31,29,30,0],[33,0,31,0],[33,6,31,6,"getScreenProps"],[33,20,31,20],[33,23,31,23],[33,32,31,6,"getScreenProps"],[33,46,31,23],[34,0,31,23],[34,11,31,29,"EMPTY_SCREEN_PROPS"],[34,29,31,23],[35,0,31,23],[35,3,31,0],[37,0,33,0],[37,11,33,9,"createReactNavigationReduxMiddleware"],[37,47,33,0],[37,48,34,2,"navStateSelector"],[37,64,33,0],[37,66,36,27],[38,0,36,27],[38,8,35,2,"key"],[38,11,36,27],[38,82,35,17],[38,88,36,27],[39,0,37,2],[39,11,37,9],[39,21,37,9,"store"],[39,26,37,14],[40,0,37,14],[40,13,37,18],[40,23,37,18,"next"],[40,27,37,22],[41,0,37,22],[41,15,37,26],[41,25,37,26,"action"],[41,31,37,32],[41,33,37,36],[42,0,38,4],[42,14,38,10,"oldState"],[42,22,38,18],[42,25,38,21,"store"],[42,30,38,26],[42,31,38,27,"getState"],[42,39,38,21],[42,41,38,4],[43,0,39,4],[43,14,39,10,"result"],[43,20,39,16],[43,23,39,19,"next"],[43,27,39,23],[43,28,39,24,"action"],[43,34,39,23],[43,35,39,4],[44,0,40,4],[44,14,40,10,"newState"],[44,22,40,18],[44,25,40,21,"store"],[44,30,40,26],[44,31,40,27,"getState"],[44,39,40,21],[44,41,40,4],[45,0,41,4,"triggerAllSubscribers"],[45,10,41,4,"triggerAllSubscribers"],[45,31,41,25],[45,32,42,6,"key"],[45,35,41,25],[45,37,43,6],[46,0,44,8,"type"],[46,12,44,8,"type"],[46,16,44,12],[46,18,44,14],[46,26,43,6],[47,0,45,8,"action"],[47,12,45,8,"action"],[47,18,45,14],[47,20,45,8,"action"],[47,26,43,6],[48,0,46,8,"state"],[48,12,46,8,"state"],[48,17,46,13],[48,19,46,15,"navStateSelector"],[48,35,46,31],[48,36,46,32,"newState"],[48,44,46,31],[48,45,43,6],[49,0,47,8,"lastState"],[49,12,47,8,"lastState"],[49,21,47,17],[49,23,47,19,"navStateSelector"],[49,39,47,35],[49,40,47,36,"oldState"],[49,48,47,35],[50,0,43,6],[50,11,41,25],[50,12,41,4],[51,0,50,4],[51,17,50,11,"result"],[51,23,50,4],[52,0,51,3],[52,9,37,22],[53,0,37,22],[53,7,37,14],[54,0,37,14],[54,5,37,2],[55,0,52,1],[57,0,54,0],[57,6,54,6,"delayedTriggers"],[57,21,54,21],[57,24,54,24],[57,28,54,28,"Map"],[57,31,54,24],[57,33,54,0],[59,0,56,0],[59,11,56,9,"triggerAllSubscribers"],[59,32,56,0],[59,33,56,31,"key"],[59,36,56,0],[59,38,56,44,"payload"],[59,45,56,0],[59,47,56,77],[60,0,57,2],[60,8,57,8,"trigger"],[60,15,57,15],[60,18,58,4],[60,27,57,8,"trigger"],[60,34,58,4],[61,0,58,4],[61,13,58,10,"getReduxSubscribers"],[61,32,58,29],[61,33,58,30,"key"],[61,36,58,29],[61,37,58,10],[61,38,58,35,"forEach"],[61,45,58,10],[61,46,58,43],[61,56,58,43,"subscriber"],[61,66,58,53],[62,0,58,53],[62,15,58,57,"subscriber"],[62,25,58,67],[62,26,58,68,"payload"],[62,33,58,67],[62,34,58,53],[63,0,58,53],[63,7,58,10],[63,8,58,4],[64,0,58,4],[64,5,57,2],[66,0,59,2],[66,8,60,4],[66,9,60,5,"payload"],[66,16,60,12],[66,17,60,13,"action"],[66,23,60,4],[66,27,61,4],[66,28,61,5,"payload"],[66,35,61,12],[66,36,61,13,"action"],[66,42,61,5],[66,43,61,20,"hasOwnProperty"],[66,57,61,5],[66,58,61,35],[66,64,61,5],[66,65,60,4],[66,69,62,4],[66,70,62,5,"payload"],[66,77,62,12],[66,78,62,13,"action"],[66,84,62,5],[66,85,62,20,"type"],[66,89,62,5],[66,90,62,25,"startsWith"],[66,100,62,5],[66,101,62,36],[66,113,62,5],[66,114,60,4],[66,118,63,4,"payload"],[66,125,63,11],[66,126,63,12,"state"],[66,131,63,4],[66,136,63,22,"payload"],[66,143,63,29],[66,144,63,30,"lastState"],[66,153,59,2],[66,155,64,4],[67,0,65,4,"trigger"],[67,6,65,4,"trigger"],[67,13,65,11],[68,0,66,4],[69,0,67,3],[71,0,68,2],[71,8,68,8,"existingTriggers"],[71,24,68,24],[71,27,68,27,"delayedTriggers"],[71,42,68,42],[71,43,68,43,"get"],[71,46,68,27],[71,47,68,47,"key"],[71,50,68,27],[71,51,68,2],[73,0,69,2],[73,8,69,6,"existingTriggers"],[73,24,69,2],[73,26,69,24],[74,0,70,4,"existingTriggers"],[74,6,70,4,"existingTriggers"],[74,22,70,20],[74,23,70,21,"push"],[74,27,70,4],[74,28,70,26,"trigger"],[74,35,70,4],[75,0,71,3],[75,5,69,2],[75,11,71,9],[76,0,72,4,"delayedTriggers"],[76,6,72,4,"delayedTriggers"],[76,21,72,19],[76,22,72,20,"set"],[76,25,72,4],[76,26,72,24,"key"],[76,29,72,4],[76,31,72,29],[76,32,72,30,"trigger"],[76,39,72,29],[76,40,72,4],[77,0,73,3],[78,0,74,1],[80,0,76,0],[80,11,76,9,"triggerDelayedSubscribers"],[80,36,76,0],[80,37,76,35,"key"],[80,40,76,0],[80,42,76,48],[81,0,77,2],[81,8,77,8,"triggers"],[81,16,77,16],[81,19,77,19,"delayedTriggers"],[81,34,77,34],[81,35,77,35,"get"],[81,38,77,19],[81,39,77,39,"key"],[81,42,77,19],[81,43,77,2],[83,0,78,2],[83,8,78,6],[83,9,78,7,"triggers"],[83,17,78,2],[83,19,78,17],[84,0,79,4],[85,0,80,3],[87,0,81,2,"delayedTriggers"],[87,4,81,2,"delayedTriggers"],[87,19,81,17],[87,20,81,18,"delete"],[87,26,81,2],[87,27,81,25,"key"],[87,30,81,2],[89,0,82,2],[89,25,82,22,"triggers"],[89,33,82,2],[89,193,82,32],[90,0,82,32],[92,0,82,32],[93,0,82,32],[94,0,82,32],[95,0,82,32],[96,0,82,32],[97,0,82,32],[98,0,82,32],[99,0,82,32],[101,0,82,32],[101,10,82,11,"trigger"],[101,18,82,32],[103,0,83,4,"trigger"],[103,6,83,4,"trigger"],[103,14,83,11],[104,0,84,3],[105,0,85,1],[107,0,87,0],[107,11,87,9,"createDidUpdateCallback"],[107,34,87,0],[107,35,87,33,"key"],[107,38,87,0],[107,40,87,46],[108,0,88,2],[108,11,88,9,"triggerDelayedSubscribers"],[108,36,88,34],[108,37,88,35,"bind"],[108,41,88,9],[108,42,88,40],[108,46,88,9],[108,48,88,46,"key"],[108,51,88,9],[108,52,88,2],[109,0,89,1],[111,0,91,0],[111,11,91,9,"initializeListeners"],[111,30,91,0],[111,31,91,29,"key"],[111,34,91,0],[111,36,91,42,"state"],[111,41,91,0],[111,43,91,66],[112,0,92,2,"triggerAllSubscribers"],[112,4,92,2,"triggerAllSubscribers"],[112,25,92,23],[112,26,93,4,"key"],[112,29,92,23],[112,31,94,4],[113,0,95,6,"type"],[113,6,95,6,"type"],[113,10,95,10],[113,12,95,12],[113,20,94,4],[114,0,96,6,"action"],[114,6,96,6,"action"],[114,12,96,12],[114,14,96,14,"initAction"],[114,33,94,4],[115,0,97,6,"state"],[115,6,97,6,"state"],[115,11,97,11],[115,13,97,13,"state"],[115,18,94,4],[116,0,98,6,"lastState"],[116,6,98,6,"lastState"],[116,15,98,15],[116,17,98,17],[117,0,94,4],[117,5,92,23],[117,6,92,2],[118,0,101,2,"triggerDelayedSubscribers"],[118,4,101,2,"triggerDelayedSubscribers"],[118,29,101,27],[118,30,101,28,"key"],[118,33,101,27],[118,34,101,2],[119,0,102,1],[121,0,104,0],[121,11,104,9,"createNavigationPropConstructor"],[121,42,104,0],[121,43,104,41,"key"],[121,46,104,0],[121,48,104,54],[122,0,105,2],[122,11,105,9],[122,21,106,4,"dispatch"],[122,29,105,9],[122,31,107,4,"state"],[122,36,105,9],[122,38,108,4,"router"],[122,44,105,9],[122,46,109,4,"getCurrentNavigation"],[122,66,105,9],[122,68,110,36],[123,0,111,4],[123,30,112,6,"router"],[123,36,111,4],[123,38,113,6],[123,112,114,8],[123,164,113,6],[123,167,115,8],[123,205,113,6],[123,208,116,8],[123,256,111,4],[124,0,118,4],[124,30,119,6,"getCurrentNavigation"],[124,50,118,4],[124,52,120,6],[124,136,121,8],[124,188,120,6],[124,191,122,8],[124,229,120,6],[124,232,123,8],[124,280,118,4],[125,0,125,4],[125,13,125,11],[125,38,126,6,"router"],[125,44,125,11],[125,46,127,6,"state"],[125,51,125,11],[125,53,128,6,"dispatch"],[125,61,125,11],[125,63,129,6,"getReduxSubscribers"],[125,82,129,25],[125,83,129,26,"key"],[125,86,129,25],[125,87,125,11],[125,89,130,6,"getScreenProps"],[125,103,125,11],[125,105,131,6,"getCurrentNavigation"],[125,125,125,11],[125,126,125,4],[126,0,133,3],[126,5,105,2],[127,0,134,1]]},"type":"js/module"}]}